<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DaLat Travel - BetterHeal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/navigation.css">
    <link rel="stylesheet" href="css/dalat-travel.css">
    <link rel="stylesheet" href="css/fixed-attendance.css">
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">
    <meta name="theme-color" content="#5b8a72">
    <style>
        .hero-section {
            background-image: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.3)), 
                              url('img/dalatcover.png?v=1') !important;
            background-size: cover !important;
            background-position: center bottom !important;
        }
    </style>
</head>
<body>
    <header class="premium-header">
        <nav class="navbar-container">
            <button class="mobile-toggle" aria-label="Toggle Menu">
                <i class="fas fa-bars"></i>
            </button>
            <a href="dashboard.html" class="logo-brand">
                <i class="fas fa-heart"></i> BetterHeal
            </a>
            <ul class="nav-menu">
                <li class="nav-item"><a href="dashboard.html" class="nav-link-custom"><i class="fas fa-home"></i> <span>Trang ch·ªß</span></a></li>
                <li class="nav-item"><a href="feelings.html" class="nav-link-custom"><i class="fas fa-heart-pulse"></i> <span>N·ªói l√≤ng</span></a></li>
                <li class="nav-item"><a href="journal.html" class="nav-link-custom"><i class="fas fa-book-open"></i> <span>Nh·∫≠t k√Ω</span></a></li>
                <li class="nav-item"><a href="foryou.html" class="nav-link-custom active"><i class="fas fa-hand-holding-heart"></i> <span>For You</span></a></li>
                <li class="nav-item"><a href="community.html" class="nav-link-custom"><i class="fas fa-comments"></i> <span>T√¢m s·ª±</span></a></li>
            </ul>
            <div class="nav-actions">
                <div id="authButtons" class="auth-container" style="display: none;">
                    <a href="login.html" class="btn">ƒêƒÉng nh·∫≠p</a>
                    <a href="register.html" class="btn btn-secondary">ƒêƒÉng k√Ω</a>
                </div>
                <div id="userInfo" class="user-profile" style="display: none;">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <span class="user-name" id="userName">User</span>
                    <button id="logoutBtn" class="logout-pill" title="ƒêƒÉng xu·∫•t">
                        <i class="fas fa-arrow-right-from-bracket"></i>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <div class="back-navigation">
        <a href="foryou.html" class="back-btn">
            <i class="fas fa-arrow-left"></i> <span>Quay l·∫°i</span>
        </a>
    </div>

    <main>
        <section class="hero-section">
            <div class="hero-overlay"></div>
            <div class="hero-content">
                <h1 class="animated-title">DaLat Travel</h1>
                <p class="subtitle">K·∫ø ho·∫°ch cho chuy·∫øn h√†nh tr√¨nh t√¨nh y√™u t·∫°i th√†nh ph·ªë ng√†n hoa üå∏</p>
                <div class="trip-stats">
                    <div class="stat-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span id="locationCount">0</span> ƒê·ªãa ƒëi·ªÉm
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-calendar-alt"></i>
                        <span id="planCount">0</span> Ho·∫°t ƒë·ªông
                    </div>
                </div>
            </div>
        </section>

        <section class="travel-container">
            <div class="travel-tabs">
                <button class="tab-btn active" data-tab="itinerary">
                    <i class="fas fa-route"></i> L·ªãch tr√¨nh
                </button>
                <button class="tab-btn" data-tab="locations">
                    <i class="fas fa-map-marked-alt"></i> ƒê·ªãa ƒëi·ªÉm ƒë·ªãnh ƒë·∫øn
                </button>
                <button class="tab-btn" data-tab="checklist">
                    <i class="fas fa-clipboard-list"></i> Chu·∫©n b·ªã
                </button>
                <button class="tab-btn" data-tab="notes">
                    <i class="fas fa-edit"></i> Ghi ch√∫
                </button>
            </div>

            <div class="tab-content active" id="itinerary">
                <div class="section-header">
                    <h2><i class="fas fa-clock"></i> Th·ªùi gian bi·ªÉu</h2>
                    <button class="add-btn" onclick="openModal('plan')">
                        <i class="fas fa-plus"></i> Th√™m ho·∫°t ƒë·ªông
                    </button>
                </div>
                <div class="itinerary-list" id="itineraryList">
                    <!-- S·∫Ω ƒë∆∞·ª£c load t·ª´ Firebase -->
                    <div class="empty-state">
                        <i class="fas fa-plane-departure"></i>
                        <p>Ch∆∞a c√≥ l·ªãch tr√¨nh n√†o ƒë∆∞·ª£c l·∫≠p...</p>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="locations">
                <div class="section-header">
                    <h2><i class="fas fa-heart"></i> C√°c n∆°i ƒë·ªãnh ƒë·∫øn</h2>
                    <button class="add-btn" onclick="openModal('location')">
                        <i class="fas fa-plus"></i> Th√™m ƒë·ªãa ƒëi·ªÉm
                    </button>
                </div>
                <div class="location-grid" id="locationGrid">
                    <!-- S·∫Ω ƒë∆∞·ª£c load t·ª´ Firebase -->
                </div>
            </div>

            <div class="tab-content" id="checklist">
                <div class="section-header">
                    <h2><i class="fas fa-tasks"></i> Danh s√°ch c·∫ßn chu·∫©n b·ªã</h2>
                    <button class="add-btn" onclick="openModal('checklist')">
                        <i class="fas fa-plus"></i> Th√™m ƒë·ªì c·∫ßn chu·∫©n b·ªã
                    </button>
                </div>
                <div class="checklist-container" id="checklistContainer">
                    <!-- S·∫Ω ƒë∆∞·ª£c load t·ª´ Firebase -->
                </div>
            </div>
            <div class="tab-content" id="notes">
                <div class="section-header">
                    <h2><i class="fas fa-edit"></i> Ghi ch√∫ chung</h2>
                    <button class="add-btn" id="saveNotesBtn">
                        <i class="fas fa-save"></i> L∆∞u ghi ch√∫
                    </button>
                </div>
                <div class="notes-container">
                    <textarea id="travelNotes" class="notes-textarea" placeholder="Vi·∫øt l·∫°i nh·ªØng l∆∞u √Ω, t√¢m t∆∞ hay b·∫•t c·ª© ƒëi·ªÅu g√¨ cho chuy·∫øn ƒëi n√†y..."></textarea>
                    <div id="notesStatus" class="notes-status"></div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal cho Plan/Location/Checklist -->
    <div class="travel-modal" id="travelModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Th√™m m·ªõi</h3>
                <button class="close-modal" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="travelForm">
                    <input type="hidden" id="itemType">
                    <input type="hidden" id="itemId">
                    
                    <div id="planFields" class="form-fields">
                        <div class="form-group">
                            <label>Ng√†y</label>
                            <input type="date" id="planDate" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Th·ªùi gian</label>
                            <input type="time" id="planTime" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Ho·∫°t ƒë·ªông</label>
                            <input type="text" id="planTitle" class="form-input" placeholder="VD: ƒêi c√† ph√™ T√∫i M∆° To">
                        </div>
                        <div class="form-group">
                            <label>Ghi ch√∫</label>
                            <textarea id="planDesc" class="form-input" placeholder="Chi ti·∫øt ho·∫°t ƒë·ªông..."></textarea>
                        </div>
                    </div>

                    <div id="locationFields" class="form-fields" style="display: none;">
                        <div class="form-group">
                            <label>T√™n ƒë·ªãa ƒëi·ªÉm</label>
                            <input type="text" id="locTitle" class="form-input" placeholder="VD: H·ªì Tuy·ªÅn L√¢m">
                        </div>
                        <div class="form-group">
                            <label>Link ·∫£nh (n·∫øu c√≥)</label>
                            <input type="text" id="locImage" class="form-input" placeholder="https://...">
                        </div>
                        <div class="form-group">
                            <label>L√Ω do mu·ªën ƒë·∫øn</label>
                            <textarea id="locDesc" class="form-input" placeholder="T·∫°i sao hai ƒë·ª©a m√¨nh mu·ªën ƒë·∫øn ƒë√¢y?"></textarea>
                        </div>
                    </div>

                    <div id="checklistFields" class="form-fields" style="display: none;">
                        <div class="form-group">
                            <label>T√™n ƒë·ªì v·∫≠t</label>
                            <input type="text" id="checkTitle" class="form-input" placeholder="VD: √Åo kho√°c d√†y">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal()">H·ªßy</button>
                <button class="btn-save" id="saveTravelBtn">L∆∞u l·∫°i</button>
            </div>
        </div>
    </div>

    <!-- Firebase Scripts -->
    <script type="module" src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js"></script>
    <script type="module" src="js/dalat-travel.js"></script>
    <script src="js/navigation.js"></script>

    <div class="fixed-attendance-btn" id="fixedAttendanceBtn">
        <a href="attendance.html" title="ƒêi·ªÉm danh h√†ng ng√†y">
            <div style="position: relative;">
                <i class="fas fa-calendar-check"></i>
                <div id="attendanceBadge" style="position: absolute; top: -10px; right: -10px; background-color: #e74c3c; color: white; width: 18px; height: 18px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 12px; font-weight: bold; box-shadow: 0 2px 5px rgba(0,0,0,0.2); animation: pulse 1.5s infinite;">!</div>
            </div>
            <span>ƒêi·ªÉm danh</span>
        </a>
    </div>
</body>
</html>
